{{define "content"}}
<div class="max-w-4xl mx-auto">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-semibold text-gray-800">My Todos</h2>
        <a href="/todos/new" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-200">
            Add New Todo
        </a>
    </div>
    
    <!-- Quick Add Form -->
    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
        <h3 class="text-lg font-semibold mb-4">Quick Add</h3>
        <form hx-post="/todos" hx-target="#todo-list" hx-swap="innerHTML" class="space-y-4">
            <div class="flex space-x-4">
                <input type="text" name="title" placeholder="Todo title..." required
                       class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <input type="text" name="description" placeholder="Description (optional)"
                       class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <button type="submit" 
                        class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-md transition duration-200">
                    Add
                </button>
            </div>
        </form>
    </div>
    
    <!-- Todo List -->
    <div id="todo-list" class="space-y-4">
        {{if .Todos}}
            {{range .Todos}}
            <div class="bg-white p-4 rounded-lg shadow-md border-l-4 {{completedClass .Completed}}">
                <div class="flex items-center justify-between">
                    <div class="flex-1">
                        <h3 class="font-semibold {{completedTextClass .Completed}}">{{.Title}}</h3>
                        {{if .Description}}<p class="text-gray-600 mt-1 {{completedTextClass .Completed}}">{{.Description}}</p>{{end}}
                        <p class="text-xs text-gray-400 mt-2">Created: {{formatDate .CreatedAt}}</p>
                    </div>
                    <div class="flex space-x-2 ml-4">
                        <button hx-post="/todos/{{.ID}}/toggle" hx-target="#todo-list" hx-indicator="#loading"
                                class="px-3 py-1 text-sm rounded transition duration-200 {{toggleButtonClass .Completed}}">
                            {{toggleButtonText .Completed}}
                        </button>
                        <a href="/todos/{{.ID}}/edit" 
                           class="px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition duration-200">
                            Edit
                        </a>
                        <button hx-delete="/todos/{{.ID}}" hx-target="#todo-list" hx-confirm="Are you sure you want to delete this todo?" hx-indicator="#loading"
                                class="px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600 transition duration-200">
                            Delete
                        </button>
                    </div>
                </div>
            </div>
            {{end}}
        {{else}}
            <div class="bg-white p-8 rounded-lg shadow-md text-center">
                <p class="text-gray-500 text-lg">No todos yet!</p>
                <p class="text-gray-400 mt-2">Create your first todo using the form above or the "Add New Todo" button.</p>
            </div>
        {{end}}
    </div>
</div>
{{end}}
